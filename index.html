<!DOCTYPE html>
<html lang="en-IN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanjay Paras Website</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: #f5f5f5;
        }
        
        /* Header Styles */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, #d32f2f, #b71c1c);
            color: white;
            padding: 8px 20px;
            display: flex;
            align-items: center;
            box-shadow: none;
            z-index: 1000;
            min-height: 70px;
        }
        
        /* Logo container in top-left corner - REDUCED SIZE BY 10px */
        .logo-container {
            margin-right: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 55px; /* Reduced from 65px */
            width: 55px; /* Reduced from 65px */
            overflow: hidden;
            border-radius: 50%;
            background: transparent;
            flex-shrink: 0;
        }

        .logo-container img {
            height: 100%;
            width: 100%;
            object-fit: contain;
            background: transparent;
            border: none;
            box-shadow: none;
        }

        /* Center content */
        .header-center {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 0 20px;
            min-width: 0; /* Allows text to shrink properly */
        }
        
        /* Center tagline */
        .center-tagline {
            font-size: 18px;
            color: #FFFFFF;
            font-weight: 500;
            letter-spacing: 0.5px;
            text-align: center;
            line-height: 1.3;
        }
        
        /* Second tagline */
        .trusted-tagline {
            font-size: 18px;
            color: #FFFFFF;
            font-weight: 500;
            letter-spacing: 0.5px;
            text-align: center;
            line-height: 1.3;
            margin-top: 5px;
        }
        
        /* Cart Image Container - REDUCED SIZE BY 10px */
        .cart-image-container {
            margin-left: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 50px; /* Reduced from 60px */
            width: 50px; /* Reduced from 60px */
            overflow: hidden;
            border-radius: 50%;
            background: transparent;
            flex-shrink: 0;
        }

        .cart-image-container a {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
        }

        .cart-image-container img {
            height: 100%;
            width: 100%;
            object-fit: contain;
            background: transparent;
            border: none;
            cursor: pointer;
            transition: transform 0.3s ease, filter 0.3s ease;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .cart-image-container img:hover {
            transform: scale(1.08);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3)) brightness(1.05);
        }
        
        /* Adjust main content position */
        .main-content {
            margin-top: 140px;
        }
        
        /* Black Header Section - MODIFIED */
        .black-header {
            position: fixed;
            left: 0;
            width: 100%;
            background-color: #000000;
            color: white;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            z-index: 999;
            min-height: 70px;
            top: 70px;
        }
        
        /* Home button on left */
        .home-button {
            margin-right: 20px;
        }
        
        .home-button a {
            color: #FFFFFF;
            text-decoration: none;
            font-size: 18px;
            font-weight: 500;
            transition: color 0.3s;
            white-space: nowrap;
        }
        
        .home-button a:hover {
            color: #FFFFFF;
        }
        
        /* Search box in center - NEW */
        .black-header-search {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 20px;
        }
        
        .search-container {
            width: 70%;
        }
        
        .search-box {
            width: 100%;
            padding: 10px 20px;
            font-size: 16px;
            border: 2px solid #444;
            border-radius: 25px;
            outline: none;
            transition: all 0.3s ease;
            background-color: #fff;
            color: #333;
        }
        
        .search-box::placeholder {
            color: #888;
            font-style: italic;
        }
        
        .search-box:focus {
            border-color: #d32f2f;
            background-color: #fff;
            box-shadow: 0 0 8px rgba(211, 47, 47, 0.5);
        }
        
        .search-box:hover {
            border-color: #999;
            background-color: #fff;
        }
        
        /* Contact button on right */
        .contact-button {
            margin-left: 20px;
        }
        
        .contact-button a {
            color: #FFFFFF;
            text-decoration: none;
            font-size: 18px;
            font-weight: 500;
            transition: color 0.3s;
            white-space: nowrap;
        }
        
        .contact-button a:hover {
            color: #FFFFFF;
        }
        
        /* Search Results Section - FIXED */
    .search-results {
    position: fixed;
    top: 140px; 
    left: 0;
    width: 100%;
    background: white;
    z-index: 998;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    display: none;
    border-top: 2px solid #d32f2f;
    max-height: calc(100vh - 140px);
    overflow-y: auto;
        }

        .results-container {
            padding: 20px;
            width: 95%;
            margin: 0 auto;
        }

        /* Ensure results container doesn't add extra padding */
        .search-results > .results-container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 30px;
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .results-header h3 {
            color: #333;
            font-size: 18px;
        }
        
        .close-results {
            background: #d32f2f;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .results-list {
            display: block;
            gap: 15px;
        }
        
        .no-results {
            text-align: center;
            padding: 30px;
            color: #666;
            font-style: italic;
        }
        
        /* Main Content Area */
        .main-content {
            flex: 1;
            margin-bottom: 10px;
            background-color: white;
            padding: 30px 20px;
            text-align: center;
            color: #555;
        }
        

        /* Footer Styles */
        footer {
            background: linear-gradient(135deg, #d32f2f, #b71c1c);
            color: white;
            text-align: center;
            padding: 7px;
            margin-top: auto;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .footer-title {
            font-weight: bold;
            font-size: 15px;
            margin-bottom: 4px;
        }
        
        .copyright {
            font-size: 14px;
            color: #FFFFFF;
        }

        /* ===== SEARCH RESULTS LAYOUT ===== */
        .result-item {
            background: white;
            padding: 25px;
            border-radius: 8px;
            border: 2px solid #000000;
            margin-bottom: 20px;
            width: 100%;
        }

        .result-content {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        /* Left Column: Image + Price */
        .result-left {
            grid-column: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .result-image {
            margin-bottom: 15px;
            position: relative;
            overflow: visible;
            cursor: crosshair;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fff;
            cursor: crosshair;
            height: 250px;
        }

        .result-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 8px;
            display: block;
            transition: opacity 0.3s ease;
        }

        .price-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .mrp-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #ccc;
        }

        .mrp-label {
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }

        .mrp-price {
            color: #888;
            text-decoration: line-through;
            font-size: 16px;
        }

        .bestbuy-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .bestbuy-label {
            color: #d32f2f;
            font-weight: bold;
            font-size: 16px;
        }

        .bestbuy-price {
            color: #d32f2f;
            font-size: 17px;
            font-weight: bold;
        }

        /* Search Suggestions */
        .search-suggestions {
            max-height: 200px;
            overflow-y: auto;
        }

        .search-suggestions div:last-child {
            border-bottom: none;
        }

        .search-suggestions div:hover {
            background-color: #f0f0f0;
        }
        
        /* Center Column: Name + Specifications + Warranty */
        .result-center {
            grid-column: 2;
            min-width: 0;
        }

        .item-name {
            color: #1565c0;
            font-size: 24px;
            font-weight: 800;
            margin: 0 0 15px 0;
            line-height: 1.2;
        }

        .specs-section {
            margin-bottom: 0; /* Changed from 20px to 0 */
        }

        .specs-section strong {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-size: 16px;
        }

        .specs-section ul {
            margin: 5px 0 5px 20px;
            color: #555;
        }

        .specs-section li {
            margin-bottom: 6px;
            line-height: 1.4;
        }

        /* Right Column: Description */
        .result-right {
            grid-column: 3;
            min-width: 0;
            margin-top: 35px; /* Added to align with specifications */
        }

        .description-section {
            margin-top: 0;
        }

        .description-section strong {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-size: 16px;
        }

        .description-section ul {
            margin: 5px 0 5px 20px;
            color: #555;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .description-section li {
            margin-bottom: 8px;
            line-height: 1.5;
            word-break: break-word;
        }

        /* Hide category */
        .category {
            display: none !important;
        }
        
        .description-section ul {
            margin: 5px 0 5px 20px;
            color: #555;
            word-wrap: break-word; /* Break long words */
            overflow-wrap: break-word; /* Modern property */
        }

        .description-section li {
            margin-bottom: 8px;
            line-height: 1.5;
            word-break: break-word; /* Break words if needed */
        }

        /* ===== WORKING HOVER ZOOM ===== */
        /* Zoom container */
        .zoom-container {
            position: absolute;
            left: 102%;
            top: 0;
            width: 450px;
            height: 350px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            overflow: hidden;
            display: none;
            pointer-events: none;
        }
        
        .zoomed-image {
            position: absolute;
            max-width: none;
            transform-origin: 0 0;
            pointer-events: none;
            border-radius: 4px;
        }
        
        /* Zoom lens */
        .zoom-lens {
            position: absolute;
            border: 2px solid #d32f2f;
            background: rgba(211, 47, 47, 0.15);
            cursor: none;
            display: none;
            pointer-events: none;
            z-index: 999;
            width: 150px;
            height: 150px;
            border-radius: 4px;
        }
        
        /* Show hint text */
        .result-image::after {
            content: "üñ±Ô∏è Hover to zoom";
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px;
            font-size: 12px;
            text-align: center;
            border-radius: 0 0 8px 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }
        
        .result-image:hover::after {
            opacity: 0.8;
        }
        
        /* Mobile zoom overlay */
        .mobile-zoom-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1999;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .mobile-zoom-image {
            max-width: 95%;
            max-height: 70vh;
            object-fit: contain;
            border-radius: 8px;
        }
        
        .mobile-zoom-hint {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            font-size: 14px;
            z-index: 2001;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            margin: 20px;
            border-radius: 10px;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1024px) {
            .result-content {
                grid-template-columns: 1fr 1fr; /* Two columns on tablet */
                gap: 20px;
            }
            
            .result-left {
                grid-column: 1 / span 2; /* Span full width */
                display: flex;
                gap: 20px;
            }
            
            .result-image {
                flex: 0 0 200px;
                height: 200px;
            }
            
            .price-box {
                flex: 1;
            }
            
            .result-center {
                grid-column: 1;
            }
            
            .result-right {
                grid-column: 2;
            }
            
            .zoom-container {
                width: 300px;
                height: 250px;
                left: 105%;
            }
            
            .zoom-lens {
                width: 100px;
                height: 100px;
            }
        }

        /* MOBILE LAYOUT - FIXED & REDUCED HEIGHT */
@media (max-width: 768px) {
    /* REDUCED HEADER HEIGHT ON MOBILE */
    header {
        padding: 6px 15px; 
        min-height: 65px; 
        flex-wrap: nowrap; 
        align-items: center;
        justify-content: space-between;
        position: relative;
    }
    
    /* Keep the original structure but adjust sizes */
    .logo-container {
        margin-right: 15px;
        height: 40px; 
        width: 40px; 
        order: 1;
        flex-shrink: 0;
        position: static; /* CHANGED: absolute ‚Üí static */
        left: auto; /* ADDED */
        top: auto; /* ADDED */
        transform: none; /* ADDED */
    }
    
    /* Cart container */
    .cart-image-container {
        margin-left: 15px; /* CHANGED: 0 ‚Üí 15px */
        height: 40px; /* Adjusted for mobile */
        width: 40px; /* Adjusted for mobile */
        order: 3;
        flex-shrink: 0;
        position: static; /* CHANGED: absolute ‚Üí static */
        right: auto; /* ADDED */
        top: auto; /* ADDED */
        transform: none; /* ADDED */
    }
    
    /* Center content takes available space */
    .header-center {
        width: calc(100% - 110px); /* ADDED: 40px + 40px + 15px + 15px */
        order: 2;
        padding: 0 10px; /* CHANGED: 60px ‚Üí 10px */
        margin: 0;
        min-height: auto;
        flex-grow: 1;
        text-align: center;
    }
    
    .center-tagline {
        font-size: 13px; 
        color: #FFFFFF;
        line-height: 1.2;
        margin-bottom: 2px;
        white-space: normal;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }
    
    .trusted-tagline {
        font-size: 12px; 
        margin-top: 2px;
        white-space: normal;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }
    
    /* Adjust black header position */
    .black-header {
        top: 65px; 
        padding: 6px 15px; 
        min-height: 55px; 
        flex-wrap: nowrap; /* KEEP as nowrap */
        justify-content: space-between;
        align-items: center;
        position: fixed;
        z-index: 999; 
    }
    
    /* Home and Contact buttons - FIXED */
    .home-button {
        margin-right: 10px;
        order: 1;
        white-space: nowrap;
        flex-shrink: 0;
    }
    
    .black-header-search {
        order: 2;
        flex-grow: 1;
        padding: 0 10px;
        margin-top: 0;
        min-width: 0;
    }
    
    .search-container {
        width: 100%;
    }
    
    .contact-button {
        margin-left: 10px;
        order: 3;
        white-space: nowrap;
        flex-shrink: 0;
    }
    
    .home-button a,
    .contact-button a {
        font-size: 14px;
    }
    
    .search-box {
        padding: 5px 12px; /* Slightly reduced */
        font-size: 14px;
        min-width: 50px; /* ADDED: Prevents collapse */
    }
    
    /* Adjust search results position */
    .search-results {
        top: 120px;
        max-height: calc(100vh - 120px);
    }
    
    .results-container {
        width: 95%;
        padding: 15px;
    }
    
    .result-content {
        grid-template-columns: 1fr; /* Single column on mobile */
        gap: 20px;
    }
    
    .result-left {
        grid-column: 1;
        flex-direction: column;
        gap: 15px;
    }
    
    .result-image {
        flex: 0 0 auto;
        text-align: center;
        height: 200px;
    }
    
    .result-image img {
        width: 100%;
        height: 100%;
        margin: 0 auto;
    }
    
    .result-center,
    .result-right {
        grid-column: 1;
    }
    
    /* Adjust main content margin */
    .main-content {
        margin-top: 120px;
    }
    
    /* Mobile zoom adjustments */
    .zoom-container {
        position: fixed !important;
        left: 50% !important;
        top: 50% !important;
        transform: translate(-50%, -50%) !important;
        width: 90vw !important;
        height: 60vh !important;
        max-width: 400px !important;
        max-height: 300px !important;
        background: white;
        border: 3px solid #d32f2f;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        z-index: 2000 !important;
        pointer-events: none;
        display: none;
    }
    
    .zoomed-image {
        width: 100% !important;
        height: 100% !important;
        object-fit: contain;
        border-radius: 8px;
    }
    
    .zoom-lens {
        display: none !important;
    }
    
    .result-image {
        cursor: pointer;
    }
    
    .result-image::after {
        content: "üëÜ Tap to zoom";
        opacity: 0.8;
        font-size: 11px;
    }
    
    /* Improve touch experience */
    .result-image img {
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
    }
}        
 
        @media (max-width: 480px) {
    header {
        padding: 5px 12px;
        min-height: 60px; /* Further reduced */
    }
    
    .logo-container {
        height: 35px;
        width: 35px;
        margin-right: 10px;
    }
    
    .cart-image-container {
        height: 35px;
        width: 35px;
        margin-left: 10px;
    }
    
    .header-center {
        width: calc(100% - 90px); /* 35px + 35px + 10px + 10px */
        padding: 0 8px;
    }
    
    .center-tagline {
        font-size: 12px;
        line-height: 1.1;
    }
    
    .trusted-tagline {
        font-size: 11px;
        line-height: 1.1;
    }
    
    .black-header {
        top: 60px;
        padding: 5px 12px;
        min-height: 50px;
        flex-wrap: nowrap; /* ADDED: Prevents breaking */
    }
    
    .home-button a,
    .contact-button a {
        font-size: 13px;
        white-space: nowrap; /* ADDED: Prevents text wrapping */
    }
    
    .search-box {
        padding: 4px 10px;
        font-size: 13px;
        min-width: 40px; /* ADDED: Prevents collapse */
    }
    
    .search-results {
        top: 110px;
        max-height: calc(100vh - 110px);
    }
    
    .main-content {
        margin-top: 110px;
    }
    
    .results-container {
        width: 95%;
        padding: 10px;
    }
    
    .result-image {
        height: 180px;
    }
    
    .item-name {
        font-size: 20px;
    }
}

        /* For very small screens */
        @media (max-width: 360px) {
    header {
        min-height: 55px;
    }
    
    .logo-container,
    .cart-image-container {
        height: 30px;
        width: 30px;
    }
    
    .logo-container {
        margin-right: 8px; /* ADDED: Specific margin for logo */
    }
    
    .cart-image-container {
        margin-left: 8px; /* ADDED: Specific margin for cart */
    }
    
    .header-center {
        width: calc(100% - 76px); /* CHANGED: 80px ‚Üí 76px (30px + 30px + 8px + 8px) */
        padding: 0 6px; /* ADDED: Small padding for text */
    }
    
    .center-tagline {
        font-size: 10px;
        -webkit-line-clamp: 1; /* ADDED: Show only 1 line on very small screens */
    }
    
    .trusted-tagline {
        font-size: 9px;
        -webkit-line-clamp: 1; /* ADDED: Show only 1 line on very small screens */
    }
    
    .black-header {
        top: 55px;
        min-height: 45px;
        padding: 4px 8px; /* CHANGED: 10px ‚Üí 8px */
        flex-wrap: nowrap; /* ADDED: Prevents breaking */
    }
    
    .home-button a,
    .contact-button a {
        font-size: 12px;
        white-space: nowrap; /* ADDED: Prevents text wrapping */
        padding: 2px 4px; /* ADDED: Small padding for better touch */
    }
    
    .search-box {
        padding: 3px 6px; /* CHANGED: 8px ‚Üí 6px */
        font-size: 12px;
        min-width: 30px; /* ADDED: Prevents collapse */
    }
    
    .main-content {
        margin-top: 100px;
    }
    
    .search-results {
        top: 100px;
        max-height: calc(100vh - 100px);
    }
}
        
    </style>
</head>
<body>
    <!-- Fixed Header -->
    <header>
        <!-- Logo in top-left corner -->
        <div class="logo-container">
            <img src="/sanjayparas/images/pnlogo.jpg" alt="Paras International Logo" style="background: transparent;">
        </div>
        
        <!-- Center content with centered tagline -->
        <div class="header-center">
            <!-- First Tagline -->
            <div class="center-tagline">Physics, Chemistry, Biology and all Scientific Laboratory Equipments Retailer in West Bengal</div>
            <!-- Second Tagline -->
            <div class="trusted-tagline">Genuine Trusted Medical Equipments at Retail Price</div>
        </div>
        
        <!-- Cart Image in top-right corner -->
        <div class="cart-image-container">
            <a href="cart.html">
                <img src="/sanjayparas/images/cart.jpg" alt="Shopping Cart" style="background: transparent;">
            </a>
        </div>
    </header>
    
    <!-- Black Header Section - MODIFIED -->
    <div class="black-header">
        <!-- Home button on left -->
        <div class="home-button">
            <a href="index.html">Home</a>
        </div>
        
        <!-- Search box in center -->
        <div class="black-header-search">
            <div class="search-container">
                <input type="text" 
                       class="search-box" 
                       placeholder="Type your items here ..."
                       aria-label="Search products"
                       maxlength="30">
            </div>
        </div>
        
        <!-- Contact button on right -->
        <div class="contact-button">
            <a href="contact.html">Contact</a>
        </div>
    </div>
    
    <!-- Search Results Section -->
    <div class="search-results" id="searchResults">
        <div class="results-container">
            <div class="results-header">
                <h3 id="resultsTitle">Search Results</h3>
                <button class="close-results" id="closeResults">Close</button>
            </div>
            <div class="results-list" id="resultsList">
                <!-- Results will appear here -->
            </div>
        </div>
    </div>
    
        <!-- Main Content Area -->
    <main class="main-content">
        <!-- Ready for your content -->
    </main>
    
    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-title">A product of Paras Nternational</div>
            <div class="copyright">¬© 2023 All rights reserved.</div>
        </div>
    </footer>
    
    <!-- Mobile Zoom Overlay -->
    <div class="mobile-zoom-overlay" id="mobileZoomOverlay">
        <img class="mobile-zoom-image" id="mobileZoomImage" src="" alt="Zoomed Image">
        <div class="mobile-zoom-hint">Touch and drag to zoom ‚Ä¢ Tap anywhere to close</div>
    </div>

<script>
    // 1. GLOBAL VARIABLES & LOADING
    let allItems = [];
    let searchTimeout;

    async function loadJSONFiles() {
        console.log('üöÄ Loading Lab Data...');
        try {
            const files = ['biolabitems.json', 'physlabitems.json', 'chemlabitems.json', 'scientificlabitems.json'];
            const responses = await Promise.all(files.map(file => 
                fetch(file).then(res => res.ok ? res.json() : [])
            ));
            
            // Combine and clean discount data
            allItems = [].concat(...responses).map(item => {
                if (item.discount) item.discount = item.discount.toString().replace('%', '');
                return item;
            });

            console.log(`‚úÖ Loaded ${allItems.length} items.`);
        } catch (error) {
            console.error('‚ùå Load Error:', error);
        }
    }

    // 2. SEARCH & RENDER
    function searchItems() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            const searchTerm = document.querySelector('.search-box').value.toLowerCase().trim();
            const resultsList = document.getElementById('resultsList');
            const searchResults = document.getElementById('searchResults');
            const resultsTitle = document.getElementById('resultsTitle');

            resultsList.innerHTML = '';

            if (searchTerm.length < 2) {
                searchResults.style.display = 'none';
                return;
            }

            // Calculate Scoring
            const matchedItems = allItems.map(item => {
                let score = 0;
                const name = item.name.toLowerCase();
                
                if (name === searchTerm) score += 100;
                if (name.startsWith(searchTerm)) score += 50;
                if (name.includes(searchTerm)) score += 30;

                const searchWords = searchTerm.split(/[\s\-_.,;]+/).filter(w => w.length > 0);
                const nameWords = name.split(/[\s\-_.,;]+/).filter(w => w.length > 0);

                searchWords.forEach(sw => {
                    nameWords.forEach(nw => {
                        if (nw === sw) score += 40;
                        else if (nw.includes(sw) && sw.length >= 3) score += 20;
                    });
                });

                return { ...item, relevanceScore: score };
            })
            .filter(item => item.relevanceScore > 0)
            .sort((a, b) => b.relevanceScore - a.relevanceScore);

            // Render Results
            if (matchedItems.length > 0) {
                resultsTitle.textContent = `Found ${matchedItems.length} items for "${searchTerm}"`;
                
                matchedItems.forEach(item => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'result-item';
                    
                    const specsHTML = Array.isArray(item.specifications) ? item.specifications.map(s => `<li>${s}</li>`).join('') : '';
                    const descHTML = Array.isArray(item.description) ? item.description.map(d => `<li>${d}</li>`).join('') : `<li>${item.description || ''}</li>`;

                    resultItem.innerHTML = `
                        <div class="result-content">
                            <div class="result-left">
                                <div class="result-image">
                                    <img src="${item.image || 'placeholder.jpg'}" alt="${item.name}">
                                </div>
                                <div class="price-box">
                                    <div class="mrp-line"><span class="mrp-label">M.R.P.</span> <span class="mrp-price">INR ${item.mrpPrice || '0'}/-</span></div>
                                    <div class="bestbuy-line"><span class="bestbuy-label">Buy</span> <span class="bestbuy-price">INR ${item.bestBuyPrice || '0'}/-</span></div>
                                </div>
                            </div>
                            <div class="result-center">
                                <h4 class="item-name">${item.name}</h4>
                                <div class="specs-section">
                                    ${specsHTML ? `<strong>Specifications:</strong><ul>${specsHTML}</ul>` : ''}
                                    <strong>Warranty:</strong> ${item.warranty || 'Not specified'}
                                </div>
                            </div>
                            <div class="result-right">
                                <div class="description-section">
                                    <strong>Descriptions:</strong>
                                    <ul>${descHTML}</ul>
                                </div>
                            </div>
                        </div>
                    `;
                    resultsList.appendChild(resultItem);
                    
                    // ATTACH ZOOM TO EACH ITEM
                    setupZoom(resultItem); 
                });
                searchResults.style.display = 'block';
            } else {
                resultsTitle.textContent = `No results found for "${searchTerm}"`;
                resultsList.innerHTML = '<div class="no-results">Try different keywords</div>';
                searchResults.style.display = 'block';
            }
        }, 300);
    }

function setupZoom(resultItem) {
    const container = resultItem.querySelector('.result-image');
    const img = container.querySelector('img');
    if (!container || !img) return;

    const lens = document.createElement('div');
    lens.className = 'zoom-lens';
    const zoomWin = document.createElement('div');
    zoomWin.className = 'zoom-container';
    const zImg = document.createElement('img');
    zImg.className = 'zoomed-image';
    zImg.src = img.src;
    
    zoomWin.appendChild(zImg);
    container.appendChild(lens);
    container.appendChild(zoomWin);

    function moveZoom(clientX, clientY) {
        lens.style.display = 'block';
        zoomWin.style.display = 'block';

        const rect = container.getBoundingClientRect();
        let x = clientX - rect.left - (lens.offsetWidth / 2);
        let y = clientY - rect.top - (lens.offsetHeight / 2);

        x = Math.max(0, Math.min(x, rect.width - lens.offsetWidth));
        y = Math.max(0, Math.min(y, rect.height - lens.offsetHeight));

        lens.style.left = x + 'px';
        lens.style.top = y + 'px';

        const cx = zoomWin.offsetWidth / lens.offsetWidth;
        const cy = zoomWin.offsetHeight / lens.offsetHeight;

        zImg.style.width = (rect.width * cx) + 'px';
        zImg.style.height = (rect.height * cy) + 'px';
        zImg.style.left = `-${x * cx}px`;
        zImg.style.top = `-${y * cy}px`;
    }

    function hideZoom() {
        lens.style.display = 'none';
        zoomWin.style.display = 'none';
    }

    // --- DESKTOP EVENTS ---
    container.addEventListener('mousemove', (e) => moveZoom(e.clientX, e.clientY));
    container.addEventListener('mouseleave', hideZoom);

    // --- MOBILE EVENTS (TOUCH) ---
let isTouchZooming = false;

container.addEventListener('touchstart', (e) => {
    if (e.cancelable) e.preventDefault();
    isTouchZooming = true;
    moveZoom(e.touches[0].clientX, e.touches[0].clientY);
}, { passive: false });

container.addEventListener('touchmove', (e) => {
    if (!isTouchZooming) return;
    if (e.cancelable) e.preventDefault();
    moveZoom(e.touches[0].clientX, e.touches[0].clientY);
}, { passive: false });

container.addEventListener('touchend', (e) => {
    isTouchZooming = false;
    hideZoom();
});

// Close zoom when tapping outside
container.addEventListener('touchcancel', () => {
    isTouchZooming = false;
    hideZoom();
});

    container.addEventListener('touchmove', (e) => {
        if (e.cancelable) e.preventDefault();
        moveZoom(e.touches[0].clientX, e.touches[0].clientY);
    }, { passive: false });

    container.addEventListener('touchend', hideZoom);
}

    // 4. EVENT LISTENERS
    document.querySelector('.search-box').addEventListener('input', searchItems);
    document.getElementById('closeResults').onclick = () => {
        document.getElementById('searchResults').style.display = 'none';
    };

    window.addEventListener('DOMContentLoaded', loadJSONFiles);
</script>
</body>
</html>





